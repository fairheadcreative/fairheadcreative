/*! fairheadcreative 07-05-2015 */
function addEvent(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b(require,exports,module):a.ouibounce=b()}(this,function(){return function(a,b){function c(a,b){return"undefined"==typeof a?b:a}function d(a){var b=24*a*60*60*1e3,c=new Date;return c.setTime(c.getTime()+b),"; expires="+c.toGMTString()}function e(){r.addEventListener("mouseleave",f),r.addEventListener("keydown",g)}function f(a){a.clientY>l||h("viewedOuibounceModal","true")&&!k||(i(),n())}function g(a){s||h("viewedOuibounceModal","true")&&!k||a.metaKey&&76==a.keyCode&&(s=!0,i(),n())}function h(a,b){var c=document.cookie.split("; ").reduce(function(a,b){var c=b.split("=");return a[c[0]]=c[1],a},{});return c[a]===b}function i(){a&&(a.style.display="block"),j()}function j(a){var a=a||{};"undefined"!=typeof a.cookieExpire&&(o=d(a.cookieExpire)),a.sitewide===!0&&(q=";path=/"),"undefined"!=typeof a.cookieDomain&&(p=";domain="+a.cookieDomain),document.cookie="viewedOuibounceModal=true"+o+p+q,r.removeEventListener("mouseleave",f),r.removeEventListener("keydown",g)}var b=b||{},k=b.aggressive||!1,l=c(b.sensitivity,20),m=c(b.timer,1e3),n=b.callback||function(){},o=d(b.cookieExpire)||"",p=b.cookieDomain?";domain="+b.cookieDomain:"",q=b.sitewide===!0?";path=/":"",r=document.getElementsByTagName("html")[0];setTimeout(e,m);var s=!1;return{fire:i,disable:j}}}),function(a){a.fn.visible=function(b,c,d){var e=a(this).eq(0),f=e.get(0),g=a(window),h=g.scrollTop(),i=h+g.height(),j=g.scrollLeft(),k=j+g.width(),l=e.offset().top,m=l+e.height(),n=e.offset().left,o=n+e.width(),p=b===!0?m:l,q=b===!0?l:m,r=b===!0?o:n,s=b===!0?n:o,t=c===!0?f.offsetWidth*f.offsetHeight:!0,d=d?d:"both";return"both"===d?!!t&&i>=q&&p>=h&&k>=s&&r>=j:"vertical"===d?!!t&&i>=q&&p>=h:"horizontal"===d?!!t&&k>=s&&r>=j:void 0}}(jQuery),$(function(){$(".strap-submit, .get-freebie, #key-modal .modal-close").on("click",function(){return $("#key-modal").toggle(),$("#key-modal .email").focus(),!1})}),$(window).scroll(function(){$("#closing").visible(!0)||$(".share").visible(!0)||$(".sidebar-item img").visible(!0)||$(".recommended").visible(!0)?$(".share-inner").removeClass("fixed"):$(".share-inner").addClass("fixed"),$(".sidebar").visible(!0)||$(".main .inline-freebie").visible(!0)||$("#closing").visible(!0)?$(".sidebar .in-sidebar").fadeOut():$(".sidebar .in-sidebar").fadeIn()}),addEvent(document,"mouseout",function(a){a=a?a:window.event;var b=a.relatedTarget||a.toElement;b&&"HTML"!=b.nodeName||(console.log("leaving"),$("#key-modal .email").focus())}),$(document).ready(function(){function a(a,d){a.submit(function(e){if(e.preventDefault(),b(a))d.css("color","black"),d.html("Subscribing..."),c(a,d);else{var f="A valid email address must be provided.";d.html(f),d.css("color","red")}})}function b(a){var b=a.find("input[type='email']").val();return b&&b.length?-1==b.indexOf("@")?!1:!0:!1}function c(a,b){$.ajax({type:"GET",url:a.attr("action"),data:a.serialize(),cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8",error:function(){},success:function(a){if("success"!=a.result){if($("body").hasClass("article")){var c=a.msg||"Sorry. Unable to subscribe (MailChimp problems?) Here's your freebie anyway:";$(".subscribe-freebie").show()}else var c=a.msg||"Sorry. Unable to subscribe (MailChimp problems?) Please try again in a few minutes.";b.css("color","red"),$(".modal form input, .modal p").hide(),a.msg&&a.msg.indexOf("already subscribed")>=0&&(c="Thanks, you're subscribed!",$(".subscribe-freebie").show(),$(".modal form input, .modal p").hide(),b.css("color","black"),$(".subscribe-result .freebie").show()),b.html(c)}else b.css("color","black"),$(".modal form input, .modal p").hide(),b.html($("body").hasClass("article")?"Thanks!<br>Look for the confirmation link in your inbox, your freebie awaits!":"Great!<br>Look for the confirmation link in your inbox.")}})}function d(a,b){a.submit(function(c){if(c.preventDefault(),e(a))b.html("Submitting..."),f(a,b);else{var d="We need a valid email address to send your report to.";b.html(d)}})}function e(a){var b=a.find("input[type='email']").val();return b&&b.length?-1==b.indexOf("@")?!1:!0:!1}function f(a,b){$.ajax({type:"GET",url:a.attr("action"),data:a.serialize(),cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8",error:function(){},success:function(a){if("success"!=a.result){var c=a.msg||"Sorry. Unable to capture your address (MailChimp problems?) Please try again in a few minutes? ";a.msg&&a.msg.indexOf("already subscribed")>=0&&(c="Thanks, you've already requested a report!"),b.html(c)}else $(".modal form input, .modal p").hide(),b.html("Sent!<br>Look for the confirmation link in your inbox, we only send to confirmed addresses for privacy reasons.")}})}a($(".article .modal form, .article .sidebar-item .subscribe-form, .blog-title-form"),$(".subscribe-result")),d($(".strapline-form"),$(".subscribe-result"))}),$(function(){$(".contact #option-1").on("click",function(){return $(".option").removeClass("secondary").removeClass("selected").addClass("secondary"),$(this).removeClass("secondary").addClass("selected"),$(".result").removeClass("is-visible"),$("#project-planner").addClass("is-visible"),!1}),$(".contact #option-2").on("click",function(){return $(".option").removeClass("secondary").removeClass("selected").addClass("secondary"),$(this).removeClass("secondary").addClass("selected"),$(".result").removeClass("is-visible"),$("#prices").addClass("is-visible"),!1}),$(".contact #option-3").on("click",function(){return $(".option").removeClass("secondary").removeClass("selected").addClass("secondary"),$(this).removeClass("secondary").addClass("selected"),$(".result").removeClass("is-visible"),$("#something-else").addClass("is-visible"),!1})}),$(function(){$("body").hasClass("home")&&($(".viner").append("<div class='vine-1'><div class='screen'></div></div><div class='vine-1-1'><div class='screen'></div></div><div class='vine-2'><div class='screen'></div></div><div class='vine-2-1'><div class='screen'></div></div><div class='vine-3'><div class='screen'></div></div><div class='vine-3-1'><div class='screen'></div></div><div class='vine-4'><div class='screen'></div></div><div class='vine-4-1'><div class='screen'></div></div>"),$(function a(){$(".viner .vine-1").show(0).animate({top:"0"},1e3).delay(4e3).animate({top:"629"},1e3).hide(0),$(".viner .vine-1-1").show(0).delay(100).animate({top:"400"},1e3).delay(4e3).animate({top:"700"},1e3).hide(0),$(".viner .vine-2").show(0).delay(5500).animate({top:"0"},1e3).delay(4e3).animate({top:"629"},1e3).hide(0),$(".viner .vine-2-1").show(0).delay(5600).animate({top:"400"},1e3).delay(4e3).animate({top:"700"},1e3).hide(0),$(".viner .vine-3").show(0).delay(11e3).animate({top:"0"},1e3).delay(4e3).animate({top:"629"},1e3).hide(0),$(".viner .vine-3-1").show(0).delay(11100).animate({top:"400"},1e3).delay(4e3).animate({top:"700"},1e3).hide(0),$(".viner .vine-4").show(0).delay(16500).animate({top:"0"},1e3).delay(4e3).animate({top:"629"},1e3).hide(0),$(".viner .vine-4-1").show(0).delay(16600).animate({top:"400"},1e3).delay(4e3).animate({top:"700"},1e3).hide(0),setTimeout(a,25e3)})),$(".strap-submit").on("click",function(){$('#key-modal input[type="url"]').remove(),$(this).parent().find('input[type="url"]').clone().insertAfter('#key-modal input[type="email"]')})});var _ouibounce=ouibounce(document.getElementById("key-modal"),{aggressive:!0,timer:0,callback:function(){console.log("ouibounce fired!")}});$("#key-modal").on("click",function(a){a.stopPropagation()});